<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mes salari√©s | ADSIAM - Gestion RH des formations</title>
   <link rel="stylesheet" href="/css/salaries-entreprise.css">
</head>
<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">A+</div>
                <div class="logo-text">ADSIAM</div>
            </div>

            <nav class="nav-section">
                <div class="nav-section-title">Navigation</div>
                <div class="nav-links">
                    <a href="/entreprise/dashboard" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        <span>Tableau de bord</span>
                    </a>
                    <a href="#" class="nav-link active">
                        <span class="nav-icon">üë•</span>
                        <span>Mes salari√©s</span>
                        <span class="nav-badge">24</span>
                    </a>
                    <a href="/entreprise/inscription" class="nav-link">
                        <span class="nav-icon">‚úçÔ∏è</span>
                        <span>Inscriptions</span>
                    </a>
                    <a href="/entreprise/facturation" class="nav-link">
                        <span class="nav-icon">üí∞</span>
                        <span>Facturation</span>
                        <span class="nav-badge">3</span>
                    </a>
                    <a href="/entreprise/rapport-formation" class="nav-link">
                        <span class="nav-icon">üìà</span>
                        <span>Rapports de formation</span>
                    </a>
                </div>
            </nav>

            <nav class="nav-section">
                <div class="nav-section-title">Formations</div>
                <div class="nav-links">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üìö</span>
                        <span>Catalogue</span>
                    </a>
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üéØ</span>
                        <span>Formations en cours</span>
                        <span class="nav-badge">12</span>
                    </a>
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üèÜ</span>
                        <span>Certifications</span>
                    </a>
                </div>
            </nav>

            <nav class="nav-section">
                <div class="nav-section-title">Support</div>
                <div class="nav-links">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üí¨</span>
                        <span>Support</span>
                    </a>
                    <a href="#" class="nav-link">
                        <span class="nav-icon">‚ùì</span>
                        <span>Centre d'aide</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div>
                    <h1 class="page-title">Mes salari√©s</h1>
                    <div class="breadcrumb">Espace Entreprise ‚Ä∫ Gestion des employ√©s</div>
                </div>
            </div>
            
            <div class="header-right">
                <a href="/entreprise/salaries/ajouter" class="btn-primary">
                    <span>‚ûï</span>
                    <span>Ajouter un salari√©</span>
                </a>
                
                <div class="user-menu">
                    <div class="user-avatar">SH</div>
                    <div>
                        <div style="font-size: 0.9rem; font-weight: 600;">Services Habitat</div>
                        <div style="font-size: 0.8rem; color: var(--text-light);">Administrateur RH</div>
                    </div>
                    <span>‚åÑ</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Filters -->
            <div class="filters-section fade-in">
                <div class="filters-header">
                    <h3 class="filters-title">üîç Filtres et recherche</h3>
                    <div class="filter-actions">
                        <button class="btn-secondary" onclick="resetFilters()">R√©initialiser</button>
                        <button class="btn-primary" onclick="exportData()">üìä Exporter</button>
                    </div>
                </div>
                
                <div class="filters-grid">
                    <div class="filter-group">
                        <label class="filter-label">Recherche</label>
                        <input type="text" class="filter-input" placeholder="Nom, pr√©nom, email..." id="searchInput">
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Service</label>
                        <select class="filter-select" id="serviceFilter">
                            <option value="">Tous les services</option>
                            <option value="aide-domicile">Aide √† domicile</option>
                            <option value="ehpad">EHPAD</option>
                            <option value="soins-infirmiers">Soins infirmiers</option>
                            <option value="administration">Administration</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Statut formation</label>
                        <select class="filter-select" id="statusFilter">
                            <option value="">Tous les statuts</option>
                            <option value="active">En formation</option>
                            <option value="completed">Termin√©</option>
                            <option value="pending">En attente</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Progression</label>
                        <select class="filter-select" id="progressFilter">
                            <option value="">Toutes les progressions</option>
                            <option value="high">75% et plus</option>
                            <option value="medium">25% - 74%</option>
                            <option value="low">Moins de 25%</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Employees Table -->
            <div class="employees-section fade-in">
                <div class="table-header">
                    <h3 class="table-title">üë• Liste des salari√©s</h3>
                    <span class="table-count">24 employ√©s</span>
                </div>
                
                <table class="employees-table">
                    <thead>
                        <tr>
                            <th>Employ√©</th>
                            <th>Service</th>
                            <th>Formations</th>
                            <th>Progression</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="employee-info">
                                    <div class="employee-avatar" style="background: var(--gradient-blue);">MD</div>
                                    <div class="employee-details">
                                        <h4>Marie Dubois</h4>
                                        <p>marie.dubois@services-habitat.fr</p>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span style="color: var(--text-dark); font-weight: 500;">Aide √† domicile</span>
                            </td>
                            <td>
                                <div style="color: var(--text-dark);">
                                    <strong>3</strong> formations
                                    <div style="font-size: 0.8rem; color: var(--text-light);">2 termin√©es, 1 en cours</div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                <div class="progress-circle progress-high">85%</div>
                            </td>
                            <td>
                                <span class="status-badge status-active">En formation</span>
                            </td>
                            <td>
                                <div class="actions-cell">
                                    <button class="action-btn btn-view" onclick="viewEmployee('marie-dubois')" title="Voir d√©tails">üëÅÔ∏è</button>
                                    <button class="action-btn btn-edit" onclick="editEmployee('marie-dubois')" title="Modifier">‚úèÔ∏è</button>
                                    <button class="action-btn btn-report" onclick="generateReport('marie-dubois')" title="Rapport">üìä</button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="employee-info">
                                    <div class="employee-avatar" style="background: var(--gradient-green);">JM</div>
                                    <div class="employee-details">
                                        <h4>Jean Martin</h4>
                                        <p>jean.martin@services-habitat.fr</p>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span style="color: var(--text-dark); font-weight: 500;">EHPAD</span>
                            </td>
                            <td>
                                <div style="color: var(--text-dark);">
                                    <strong>2</strong> formations
                                    <div style="font-size: 0.8rem; color: var(--text-light);">1 termin√©e, 1 en cours</div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                <div class="progress-circle progress-medium">45%</div>
                            </td>
                            <td>
                                <span class="status-badge status-active">En formation</span>
                            </td>
                            <td>
                                <div class="actions-cell">
                                    <button class="action-btn btn-view" onclick="viewEmployee('jean-martin')" title="Voir d√©tails">üëÅÔ∏è</button>
                                    <button class="action-btn btn-edit" onclick="editEmployee('jean-martin')" title="Modifier">‚úèÔ∏è</button>
                                    <button class="action-btn btn-report" onclick="generateReport('jean-martin')" title="Rapport">üìä</button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="employee-info">
                                    <div class="employee-avatar" style="background: var(--gradient-pink);">SL</div>
                                    <div class="employee-details">
                                        <h4>Sophie Leroy</h4>
                                        <p>sophie.leroy@services-habitat.fr</p>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span style="color: var(--text-dark); font-weight: 500;">Aide √† domicile</span>
                            </td>
                            <td>
                                <div style="color: var(--text-dark);">
                                    <strong>4</strong> formations
                                    <div style="font-size: 0.8rem; color: var(--text-light);">4 termin√©es</div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                <div class="progress-circle progress-high">100%</div>
                            </td>
                            <td>
                                <span class="status-badge status-completed">Termin√©</span>
                            </td>
                            <td>
                                <div class="actions-cell">
                                    <button class="action-btn btn-view" onclick="viewEmployee('sophie-leroy')" title="Voir d√©tails">üëÅÔ∏è</button>
                                    <button class="action-btn btn-edit" onclick="editEmployee('sophie-leroy')" title="Modifier">‚úèÔ∏è</button>
                                    <button class="action-btn btn-report" onclick="generateReport('sophie-leroy')" title="Rapport">üìä</button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="employee-info">
                                    <div class="employee-avatar" style="background: var(--gradient-orange);">PD</div>
                                    <div class="employee-details">
                                        <h4>Pierre Durand</h4>
                                        <p>pierre.durand@services-habitat.fr</p>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span style="color: var(--text-dark); font-weight: 500;">Soins infirmiers</span>
                            </td>
                            <td>
                                <div style="color: var(--text-dark);">
                                    <strong>1</strong> formation
                                    <div style="font-size: 0.8rem; color: var(--text-light);">1 en retard</div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                <div class="progress-circle progress-low">15%</div>
                            </td>
                            <td>
                                <span class="status-badge status-pending">En retard</span>
                            </td>
                            <td>
                                <div class="actions-cell">
                                    <button class="action-btn btn-view" onclick="viewEmployee('pierre-durand')" title="Voir d√©tails">üëÅÔ∏è</button>
                                    <button class="action-btn btn-edit" onclick="editEmployee('pierre-durand')" title="Modifier">‚úèÔ∏è</button>
                                    <button class="action-btn btn-report" onclick="generateReport('pierre-durand')" title="Rapport">üìä</button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="employee-info">
                                    <div class="employee-avatar" style="background: var(--gradient-purple);">AL</div>
                                    <div class="employee-details">
                                        <h4>Anne Lefebvre</h4>
                                        <p>anne.lefebvre@services-habitat.fr</p>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span style="color: var(--text-dark); font-weight: 500;">Administration</span>
                            </td>
                            <td>
                                <div style="color: var(--text-dark);">
                                    <strong>2</strong> formations
                                    <div style="font-size: 0.8rem; color: var(--text-light);">1 termin√©e, 1 en cours</div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                <div class="progress-circle progress-medium">60%</div>
                            </td>
                            <td>
                                <span class="status-badge status-active">En formation</span>
                            </td>
                            <td>
                                <div class="actions-cell">
                                    <button class="action-btn btn-view" onclick="viewEmployee('anne-lefebvre')" title="Voir d√©tails">üëÅÔ∏è</button>
                                    <button class="action-btn btn-edit" onclick="editEmployee('anne-lefebvre')" title="Modifier">‚úèÔ∏è</button>
                                    <button class="action-btn btn-report" onclick="generateReport('anne-lefebvre')" title="Rapport">üìä</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="table-footer">
                    <div class="pagination-info">Affichage 1-5 sur 24 employ√©s</div>
                    <div class="pagination">
                        <button class="pagination-btn">‚Äπ</button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn">2</button>
                        <button class="pagination-btn">3</button>
                        <button class="pagination-btn">4</button>
                        <button class="pagination-btn">5</button>
                        <button class="pagination-btn">‚Ä∫</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Employee Detail -->
    <div class="modal" id="employeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üìã D√©tails de l'employ√©</h3>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            
            <div class="employee-detail-card">
                <div class="employee-detail-header">
                    <div class="employee-detail-avatar" id="modalAvatar">MD</div>
                    <div class="employee-detail-info">
                        <h3 id="modalName">Marie Dubois</h3>
                        <p id="modalEmail">marie.dubois@services-habitat.fr</p>
                        <p id="modalService">Service : Aide √† domicile</p>
                    </div>
                </div>
            </div>
            
            <h4 style="margin-bottom: 1rem; color: var(--text-dark);">üéØ Formations en cours</h4>
            <div class="formations-list" id="modalFormations">
                <div class="formation-item">
                    <div class="formation-header">
                        <div class="formation-title">Communication & Relationnel</div>
                        <span class="status-badge status-completed">Termin√©</span>
                    </div>
                    <div class="formation-progress">
                        <div class="progress-bar-small">
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                        <span class="progress-text">100% - 5/5 modules</span>
                    </div>
                    <div class="formation-meta">
                        <span>üìÖ Termin√© le 15/02/2024</span>
                        <span>üéì Certificat obtenu</span>
                    </div>
                </div>
                
                <div class="formation-item">
                    <div class="formation-header">
                        <div class="formation-title">Hygi√®ne & S√©curit√©</div>
                        <span class="status-badge status-active">En cours</span>
                    </div>
                    <div class="formation-progress">
                        <div class="progress-bar-small">
                            <div class="progress-fill" style="width: 60%"></div>
                        </div>
                        <span class="progress-text">60% - 3/5 modules</span>
                    </div>
                    <div class="formation-meta">
                        <span>üìÖ Commenc√© le 20/02/2024</span>
                        <span>‚è∞ √Ä terminer avant le 20/03/2024</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Filtres et recherche
        function setupFilters() {
            const searchInput = document.getElementById('searchInput');
            const serviceFilter = document.getElementById('serviceFilter');
            const statusFilter = document.getElementById('statusFilter');
            const progressFilter = document.getElementById('progressFilter');

            [searchInput, serviceFilter, statusFilter, progressFilter].forEach(element => {
                element.addEventListener('change', filterEmployees);
                element.addEventListener('input', filterEmployees);
            });
        }

        function filterEmployees() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const serviceFilter = document.getElementById('serviceFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const progressFilter = document.getElementById('progressFilter').value;
            
            const rows = document.querySelectorAll('.employees-table tbody tr');
            let visibleCount = 0;

            rows.forEach(row => {
                const name = row.querySelector('.employee-details h4').textContent.toLowerCase();
                const email = row.querySelector('.employee-details p').textContent.toLowerCase();
                const service = row.querySelector('td:nth-child(2)').textContent.trim();
                const status = row.querySelector('.status-badge').className;
                const progress = parseInt(row.querySelector('.progress-circle').textContent);

                let show = true;

                // Filtre de recherche
                if (searchTerm && !name.includes(searchTerm) && !email.includes(searchTerm)) {
                    show = false;
                }

                // Filtre de service
                if (serviceFilter && !service.toLowerCase().includes(serviceFilter.replace('-', ' '))) {
                    show = false;
                }

                // Filtre de statut
                if (statusFilter && !status.includes(`status-${statusFilter}`)) {
                    show = false;
                }

                // Filtre de progression
                if (progressFilter) {
                    if (progressFilter === 'high' && progress < 75) show = false;
                    if (progressFilter === 'medium' && (progress < 25 || progress >= 75)) show = false;
                    if (progressFilter === 'low' && progress >= 25) show = false;
                }

                row.style.display = show ? '' : 'none';
                if (show) visibleCount++;
            });

            // Mise √† jour du compteur
            document.querySelector('.table-count').textContent = `${visibleCount} employ√©s`;
        }

        function resetFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('serviceFilter').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('progressFilter').value = '';
            
            document.querySelectorAll('.employees-table tbody tr').forEach(row => {
                row.style.display = '';
            });
            
            document.querySelector('.table-count').textContent = '24 employ√©s';
        }

        // Modals et actions
        function viewEmployee(employeeId) {
            const modal = document.getElementById('employeeModal');
            modal.classList.add('show');
            
            // Ici vous pourriez charger les donn√©es r√©elles de l'employ√©
            console.log('Affichage d√©tails employ√©:', employeeId);
        }

        function editEmployee(employeeId) {
            alert(`‚úèÔ∏è Modification de l'employ√© : ${employeeId}\n\nRedirection vers le formulaire d'√©dition...`);
        }

        function generateReport(employeeId) {
            alert(`üìä G√©n√©ration du rapport de formation pour : ${employeeId}\n\nüìÑ